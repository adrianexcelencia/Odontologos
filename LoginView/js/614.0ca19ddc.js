"use strict";(self["webpackChunkprueba"]=self["webpackChunkprueba"]||[]).push([[614],{7614:function(e,l,a){a.r(l),a.d(l,{default:function(){return K}});var o=a(3396),i=a(9242);const t=e=>((0,o.dD)("data-v-785de079"),e=e(),(0,o.Cn)(),e),d={id:"contenedor-padre"},s={class:"row mt-5"},r={class:"col-3",id:"form"},n={class:"row g-3"},c=(0,o.uE)('<div class="f" data-v-785de079><label for="field-type" class="form-label" data-v-785de079>Tipo de Campo</label><select id="field-type" class="form-select" data-v-785de079><option value="text" data-v-785de079>Texto</option><option value="textarea" data-v-785de079>Área de Texto</option><option value="select" data-v-785de079>Select</option><option value="password" data-v-785de079>Contraseña</option><option value="date" data-v-785de079>Fecha</option><option value="time" data-v-785de079>Hora</option><option value="email" data-v-785de079>Email</option><option value="number" data-v-785de079>Numero</option><option value="checkbox" data-v-785de079>Casilla de verificacion</option></select></div>',1),u={class:"",id:"label-group"},m=t((()=>(0,o._)("label",{for:"field-label",class:"form-label",id:"label-group-label"},"Etiqueta del Campo",-1))),p={class:"form-check",id:"required-group",style:{"margin-left":"9px"}},f=t((()=>(0,o._)("label",{for:"field-required",class:"form-check-label",role:"switch"},"Requerido",-1))),h={class:"",id:"placeholder-group"},b=t((()=>(0,o._)("label",{for:"field-placeholder",class:"form-label"},"Placeholder:",-1))),_={class:"mt-4"},v={class:"col-9"},g={id:"form-builder",class:""},y=["data-id"],F={class:"row","align-items-center":""},C={class:"col"},w={class:"col-3 col-md-1",style:{margin:"0 auto",padding:"0"}},x=t((()=>(0,o._)("div",null,[(0,o._)("span",{class:"draggable-handle"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",fill:"currentColor",class:"bi bi-arrows-move",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 \n        0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 \n        0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 \n        0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 \n        0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 \n        0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"})])])],-1))),k=t((()=>(0,o._)("br",null,null,-1))),q=["onClick"],B=t((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"red",class:"bi bi-x-square-fill",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 \n  2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 \n  0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 \n  0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z"})],-1))),E=[B],I=t((()=>(0,o._)("br",null,null,-1))),L=t((()=>(0,o._)("div",{class:"d-grid gap-2 d-md-flex justify-content-md-end"},[(0,o._)("button",{class:"btn btn-success",id:"button-create-form","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},"Crear Formulario")],-1))),V=t((()=>(0,o._)("br",null,null,-1))),S={class:"modal fade",id:"staticBackdrop",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},z={class:"modal-dialog modal-dialog-centered"},D={class:"modal-content"},H=t((()=>(0,o._)("div",{class:"modal-header"},[(0,o._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Crear formulario"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),M={class:"modal-body"},T={class:"mb-3"},A=t((()=>(0,o._)("label",{for:"recipient-name",class:"col-form-label"},"Titulo:",-1))),U={class:"mb-3"},O=t((()=>(0,o._)("label",{for:"message-text",class:"col-form-label"},"Descripción:",-1))),N={class:"modal-footer"},P=t((()=>(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancelar",-1))),Z={class:""};function j(e,l,a,t,B,j){const G=(0,o.up)("field-component"),R=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[(0,o._)("div",s,[(0,o._)("div",r,[(0,o._)("div",n,[c,(0,o._)("div",u,[m,(0,o.wy)((0,o._)("input",{type:"text",id:"field-label","onUpdate:modelValue":l[0]||(l[0]=e=>B.label=e),class:"form-control"},null,512),[[i.nr,B.label]])]),(0,o._)("div",p,[f,(0,o.wy)((0,o._)("input",{type:"checkbox",id:"field-required","onUpdate:modelValue":l[1]||(l[1]=e=>B.required=e),class:"form-check-input"},null,512),[[i.e8,B.required]])]),(0,o._)("div",h,[b,(0,o.wy)((0,o._)("input",{type:"text",id:"field-placeholder","onUpdate:modelValue":l[2]||(l[2]=e=>B.placeholder=e),class:"form-control"},null,512),[[i.nr,B.placeholder]])]),(0,o._)("div",_,[(0,o._)("button",{onClick:l[3]||(l[3]=(...e)=>j.addField&&j.addField(...e)),class:"btn btn-primary"},"Agregar campo")])])]),(0,o._)("div",v,[(0,o._)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(B.formFields,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,"data-id":e.id_Field,class:"animacion animate__animated animate__slideInLeft animate-fast"},[(0,o._)("div",F,[(0,o._)("div",C,[(0,o.Wm)(G,{field:e},null,8,["field"])]),(0,o._)("div",w,[x,k,(0,o._)("div",null,[(0,o._)("span",{onClick:e=>j.deleteFields(l),class:"deletebutton"},E,8,q)]),I])])],8,y)))),128))]),L]),V])]),(0,o._)("div",S,[(0,o._)("div",z,[(0,o._)("div",D,[H,(0,o._)("div",M,[(0,o._)("form",null,[(0,o._)("div",T,[A,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"titulo","onUpdate:modelValue":l[4]||(l[4]=e=>B.titulo=e)},null,512),[[i.nr,B.titulo]])]),(0,o._)("div",U,[O,(0,o.wy)((0,o._)("textarea",{class:"form-control",id:"descripcion",style:{height:"80px",resize:"none"},"onUpdate:modelValue":l[5]||(l[5]=e=>B.descripcion=e)},null,512),[[i.nr,B.descripcion]])])])]),(0,o._)("div",N,[P,(0,o._)("div",Z,[(0,o.Wm)(R,{to:"/formularios"},{default:(0,o.w5)((()=>[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:l[6]||(l[6]=(...e)=>j.createForm&&j.createForm(...e))},"Guardar")])),_:1})])])])])])],64)}a(7658);var G=a(3413),R=a(7754),W={components:{FieldComponent:R.Z},data(){return{formFields:[],formBuilder:null,titulo:"",descripcion:"",label:"",type:"text",required:0,placeholder:"",fieldCounter:1,order:[],fecha_Creacion:""}},mounted(){this.formBuilder=document.getElementById("form-builder"),new G.ZP(this.formBuilder,{animation:150,handle:".draggable-handle",dataIdAttr:"data-id",onEnd:()=>{console.log("Se insertó un elemento")},group:"fieldsList",store:{set:e=>{this.order=e.toArray(),console.log(this.order)}}})},methods:{EliminarCampoVistaPrevia(){console.log("eliminar")},miSelect:addEventListener("change",(function(){const e=document.getElementById("field-type"),l=document.getElementById("placeholder-group"),a=document.getElementById("label-group"),o=document.getElementById("required-group");let i=e.value;"select"===i||"checkbox"===i||"submit"===i||"reset"===i?(l.style.display="none","submit"!==i&&"reset"!==i||(a.style.display="none",o.style.display="none")):(l.style.display="block",a.style.display="block",o.style.display="block")})),addField(){let e,l,a=document.getElementById("field-label").value,o=document.getElementById("field-type").value,i=document.getElementById("field-required").checked,t=document.getElementById("field-placeholder").value;const d=this.fieldCounter;if(this.fieldCounter++,"select"===o){const s=prompt("Ingrese opciones del select (separadas por coma)");if(!s)return;e=s.split(","),l=s,t="1",this.formFields.push({id_Field:d,nombre:a,label:a,type:o,required:i,placeholder:t,options:e,opcionesCadena:l})}else l="1",this.formFields.push({id_Field:d,nombre:a,label:a,type:o,required:i,placeholder:t,opcionesCadena:l});this.label="",this.type="text",this.required=!1,this.placeholder=""},deleteFields(e){const l=document.getElementsByClassName("animacion")[e];l&&(l.classList.add("animate__slideOutRight"),setTimeout((()=>{this.formFields.splice(e,1),this.order.splice(order,1)}),400))},createForm(){let e;if(this.order&&this.order.length>0){const l=[];let a=1;this.order.forEach((e=>{const o=this.formFields.find((l=>l.id_Field===parseInt(e,10)));o&&(o.id_Field=a++,l.push(o))})),this.formFields=l,e={idConfigForm:0,titulo:this.titulo,descripcion:this.descripcion,fecha_Creacion:(new Date).toISOString(),fecha_Modificacion:null,fecha_Eliminacion:null,campos:this.formFields.map(((e,l)=>({id_Field:e.id_Field,nombre:e.nombre,orden:e.id_Field,etiqueta:e.label,tipo:e.type,requerido:e.required?1:0,marcador:e.placeholder,opciones:e.opcionesCadena,visible:1,clase:"form-control",estado:1,id_ConfigForm:0,fecha_eliminacion:null})))}}else e={idConfigForm:0,titulo:this.titulo,descripcion:this.descripcion,fecha_Creacion:(new Date).toISOString(),fecha_Modificacion:null,fecha_Eliminacion:null,campos:this.formFields.map(((e,l)=>({id_Field:e.id_Field,nombre:e.nombre,orden:e.id_Field,etiqueta:e.label,tipo:e.type,requerido:e.required?1:0,marcador:e.placeholder,opciones:e.opcionesCadena,visible:1,clase:"form-control",estado:1,id_ConfigForm:0,fecha_eliminacion:null})))};const l=JSON.stringify(e);console.log(l),this.axios.post("/api/ConfigForm/GuardarFormularioCreado",l,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log("guardado con exito"),this.$router.push({name:"formularios"})})).catch((e=>{console.log("error")}))}}},Y=a(89);const J=(0,Y.Z)(W,[["render",j],["__scopeId","data-v-785de079"]]);var K=J}}]);
//# sourceMappingURL=614.0ca19ddc.js.map